"use strict";(self.webpackChunkHotelManagement_Admin=self.webpackChunkHotelManagement_Admin||[]).push([[948],{2948:(b,u,t)=>{t.r(u),t.d(u,{ProfileModule:()=>S});var m=t(6814),f=t(4104),p=t(1545),a=t(6223),d=t(4581),e=t(5879),c=t(2154),h=t(482),v=t(1420),g=t(4626);const U=[{path:"",children:[{path:"",component:(()=>{class r{constructor(i,o,s,l,n){this.userSSVC=i,this.userSVC=o,this.snkbr=s,this.auth=l,this.formBuilder=n,this.user=this.userSSVC.getUserName(),this.role=this.userSSVC.getUserRole(),this.fullName=this.userSSVC.getUserFullName(),this.email=this.userSSVC.getUserEmail()}ngOnInit(){this.userInfoForm=this.formBuilder.group({fullName:this.fullName,email:this.email}),this.userUpdatePass=this.formBuilder.group({oldPassword:"",newPassword:"",confirmNewPassword:""})}updateUserSettings(){this.userInfoForm.value.fullName!=this.fullName||this.userInfoForm.value.email!=this.email?this.userSVC.updateUserInfo(this.userInfoForm.value).subscribe({next:()=>{this.userSSVC.setNewUserInfo(this.userInfoForm.value.fullName,this.userInfoForm.value.email),this.user=this.userSSVC.getUserName(),this.role=this.userSSVC.getUserRole(),this.fullName=this.userSSVC.getUserFullName(),this.email=this.userSSVC.getUserEmail(),this.snkbr.openSnackBar("New infomation updated","success")},error:i=>{this.snkbr.openSnackBar("Error encountered","failed")}}):this.snkbr.openSnackBar("Please update your Full Name or Email","failed")}updateUserPass(){this.userUpdatePass.value.newPassword===this.userUpdatePass.value.confirmNewPassword?/^(?=.*[A-Z])(?=.*\d)(?=.*[@#$%^&+=!])(?!.*\s).{6,}$/.test(this.userUpdatePass.value.newPassword)?this.userSVC.updateUserPass(this.userUpdatePass.value).subscribe({next:s=>{!0===s.succeeded?this.snkbr.openSnackBar("Password updated successfully","success"):this.snkbr.openSnackBar("Incorrect Old Password","error"),this.userUpdatePass.reset()},error:s=>{s.error&&s.error.errors&&(s.error.errors.find(n=>"PasswordMismatch"===n.code),this.snkbr.openSnackBar("Incorrect Old Password","error")),this.userUpdatePass.reset()}}):this.snkbr.openSnackBar("New password must contain at least 1 uppercase letter, 1 digit, and 1 special character (@#$%^&+=!) and be at least 6 characters long","error"):this.snkbr.openSnackBar("New password and Confirm New Password do not match","error")}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(c.T),e.Y36(h.K),e.Y36(v.o),e.Y36(g.e),e.Y36(a.qu))};static#s=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-profile"]],decls:80,vars:9,consts:[[1,"container-fluid"],[1,"text-dark","mb-4"],[1,"row","mb-3"],[1,"col-lg-4"],[1,"card","mb-3"],[1,"card-body","text-center","shadow"],["src","assets/img/dogs/image2.jpeg","width","160","height","160",1,"rounded-circle","mb-3","mt-4"],[1,"h4","fw-bold"],[1,"h4"],[1,"col-lg-8"],[1,"row"],[1,"col"],[1,"card","shadow","mb-3"],[1,"card-header","py-3"],[1,"text-primary","m-0","fw-bold"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","disabled","",1,"form-control",3,"value"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"value"],["for","full_name",1,"form-label"],["type","text","id","full_name","formControlName","fullName",1,"form-control",3,"value"],["for","role_user",1,"form-label"],["type","text","id","role_user","disabled","",1,"form-control",3,"value"],["type","submit",1,"btn","btn-success","btn-sm"],["for","oldpass",1,"form-label"],["type","password","id","oldpass","formControlName","oldPassword",1,"form-control"],["for","newpass",1,"form-label"],["type","password","id","newpass","formControlName","newPassword",1,"form-control"],["for","confpass",1,"form-label"],["type","password","id","confpass","formControlName","confirmNewPassword",1,"form-control"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Profile"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"img",6),e.TgZ(8,"p",7),e._uU(9),e.qZA(),e.TgZ(10,"p",8),e._uU(11),e.qZA(),e.TgZ(12,"p",8),e._uU(13),e.qZA()()()(),e.TgZ(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"p",14),e._uU(20,"User Settings"),e.qZA()(),e.TgZ(21,"div",15)(22,"form",16),e.NdJ("ngSubmit",function(){return s.updateUserSettings()}),e.TgZ(23,"div",10)(24,"div",11)(25,"div",17)(26,"label",18)(27,"strong"),e._uU(28,"Username"),e.qZA()(),e._UZ(29,"input",19),e.qZA()(),e.TgZ(30,"div",11)(31,"div",17)(32,"label",20)(33,"strong"),e._uU(34,"Email Address"),e.qZA()(),e._UZ(35,"input",21),e.qZA()()(),e.TgZ(36,"div",10)(37,"div",11)(38,"div",17)(39,"label",22)(40,"strong"),e._uU(41,"Full Name"),e.qZA()(),e._UZ(42,"input",23),e.qZA()(),e.TgZ(43,"div",11)(44,"div",17)(45,"label",24)(46,"strong"),e._uU(47,"Role User"),e.qZA()(),e._UZ(48,"input",25),e.qZA()()(),e.TgZ(49,"div",17)(50,"button",26),e._uU(51,"Save Settings"),e.qZA()()()()(),e.TgZ(52,"div",12)(53,"div",13)(54,"p",14),e._uU(55,"Change Password"),e.qZA()(),e.TgZ(56,"div",15)(57,"form",16),e.NdJ("ngSubmit",function(){return s.updateUserPass()}),e.TgZ(58,"div",10)(59,"div",11)(60,"div",17)(61,"label",27)(62,"strong"),e._uU(63,"Old Password"),e.qZA()(),e._UZ(64,"input",28),e.qZA()(),e.TgZ(65,"div",11)(66,"div",17)(67,"label",29)(68,"strong"),e._uU(69,"New Password"),e.qZA()(),e._UZ(70,"input",30),e.qZA()(),e.TgZ(71,"div",11)(72,"div",17)(73,"label",31)(74,"strong"),e._uU(75,"Confirm Password"),e.qZA()(),e._UZ(76,"input",32),e.qZA()()(),e.TgZ(77,"div",17)(78,"button",26),e._uU(79,"Save Settings"),e.qZA()()()()()()()()()()),2&o&&(e.xp6(9),e.Oqu(s.user),e.xp6(2),e.Oqu(s.fullName),e.xp6(2),e.Oqu(s.role),e.xp6(9),e.Q6J("formGroup",s.userInfoForm),e.xp6(7),e.s9C("value",s.user),e.xp6(6),e.s9C("value",s.email),e.xp6(7),e.s9C("value",s.fullName),e.xp6(6),e.s9C("value",s.role),e.xp6(9),e.Q6J("formGroup",s.userUpdatePass))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]})}return r})()}]}];let Z=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#s=this.\u0275mod=e.oAB({type:r});static#r=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(U),d.Bz]})}return r})(),S=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#s=this.\u0275mod=e.oAB({type:r});static#r=this.\u0275inj=e.cJS({imports:[m.ez,Z,f.Nh,p.T5,a.UX,a.u5]})}return r})()}}]);