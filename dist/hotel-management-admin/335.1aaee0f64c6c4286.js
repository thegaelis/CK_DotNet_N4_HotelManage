"use strict";(self.webpackChunkHotelManagement_Admin=self.webpackChunkHotelManagement_Admin||[]).push([[335],{3335:(E,Z,l)=>{l.r(Z),l.d(Z,{HomeModule:()=>x});var p=l(6814),d=l(4104),T=l(1545),c=l(6223),v=l(4581),t=l(5879),g=l(5861),b=l(6923);let y=(()=>{class n{constructor(e){this.billService=e}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.bills=[],e.sumBillByMonth=[],e.bills=yield e.billService.getAllBill().toPromise(),e.bills=e.bills?.filter(s=>s.status);let o=["yellow","red","blue","pink","green","brown"];for(let s=0;s<6;++s){let i=new Date,r=new Date;i.setMonth(i.getMonth()-s),r.setMonth(r.getMonth()-s+1);let u=`${i.getFullYear()}-${i.getMonth()+1}-01 00:00:00`,f=`${r.getFullYear()}-${r.getMonth()+1}-01 00:00:00`;i=new Date(u),r=new Date(f);let m={name:"Th\xe1ng "+(i.getMonth()+1),sum:0,color:o[s]};for(let a of e.bills){let C=new Date(a.dateCreated.slice(0,10)+" 00:00:00");C>=i&&C<r&&(m.sum+=a.sum)}e.sumBillByMonth.push(m)}google.charts.load("current",{packages:["corechart"]}),e.buildChart(e.sumBillByMonth)})()}buildChart(e){var s=()=>new google.visualization.ColumnChart(document.getElementById("chart"));google.charts.setOnLoadCallback(()=>(r=>{let u=[];u.push(["Element","Doanh thu",{role:"style"}]),e.reverse(),e.forEach(a=>{u.push([a.name,a.sum,a.color])});var f=google.visualization.arrayToDataTable(u);r().draw(f,{title:"Doanh thu 6 th\xe1ng g\u1ea7n nh\u1ea5t",length:"none"})})(s))}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(b.C))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-chart"]],decls:4,vars:0,consts:[[1,"container"],[1,"title"],["id","chart"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Report"),t.qZA(),t._UZ(3,"div",2),t.qZA())},styles:["#chart[_ngcontent-%COMP%]{height:400px}.title[_ngcontent-%COMP%]{color:#649e81;font-weight:500;letter-spacing:2px}"]})}return n})();function A(n,h){if(1&n&&(t.TgZ(0,"tr")(1,"th",12),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&n){const e=h.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.sum),t.xp6(2),t.Oqu(e.dateCreated.slice(0,10))}}function M(n,h){if(1&n&&(t.TgZ(0,"tr")(1,"th",12),t._uU(2,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t._UZ(5,"td"),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Oqu(e.sum)}}let U=(()=>{class n{constructor(e){this.billService=e,this.billDate=[],this.sum=0}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.bills=[],e.bills=yield e.billService.getAllBill().toPromise(),e.bills=e.bills?.filter(o=>o.status)})()}onSubmit(){this.sum=0,this.billDate=this.bills?.filter(e=>{let o=new Date(e.dateCreated.slice(0,10)+" 00:00:00");return o>=new Date(this.strdate1+" 00:00:00")&&o<=new Date(this.strdate2+" 00:00:00")}),this.billDate?.forEach(e=>this.sum+=e.sum),console.log(this.billDate)}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(b.C))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-report"]],decls:25,vars:4,consts:[[1,"container","mt-5"],[1,"container-fluid"],[1,"row"],[1,"col-4"],["name","d1","type","date",3,"ngModel","ngModelChange"],["name","d2","type","date",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","my-auto",3,"click"],[1,"row","mt-3"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["scope","row"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4," T\u1eeb: "),t.TgZ(5,"input",4),t.NdJ("ngModelChange",function(r){return s.strdate1=r}),t.qZA()(),t.TgZ(6,"div",3),t._uU(7," \u0110\u1ebfn: "),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(r){return s.strdate2=r}),t.qZA()(),t.TgZ(9,"div",3)(10,"button",6),t.NdJ("click",function(){return s.onSubmit()}),t._uU(11,"Submit"),t.qZA()()(),t.TgZ(12,"div",7)(13,"table",8)(14,"thead")(15,"tr")(16,"th",9),t._uU(17,"M\xe3 h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(18,"th",9),t._uU(19,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.TgZ(20,"th",9),t._uU(21,"Ng\xe0y"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,A,7,3,"tr",10),t.YNc(24,M,6,1,"tr",11),t.qZA()()()()()),2&o&&(t.xp6(5),t.Q6J("ngModel",s.strdate1),t.xp6(3),t.Q6J("ngModel",s.strdate2),t.xp6(15),t.Q6J("ngForOf",s.billDate),t.xp6(1),t.Q6J("ngIf",(null==s.billDate?null:s.billDate.length)>0))},dependencies:[p.sg,p.O5,c.Fj,c.JJ,c.On]})}return n})();var D=l(9947),B=l(9862);let O=(()=>{class n{constructor(e){this.http=e,this.url=D.N.url}getAllReport(){return this.http.get(`${this.url}/Report`)}deleteReportByGuestId(e){return this.http.delete(`${this.url}/Report/${e}`)}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(B.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var F=l(1109),q=l(1420);function _(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",4),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",5)(6,"i",6),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.delete(i.id))}),t.qZA()()()}if(2&n){const e=h.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.mess)}}let w=(()=>{class n{constructor(e,o,s){this.reportService=e,this.guestService=o,this.snkbr=s,this.reports=[]}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.reports=[];let o=yield e.reportService.getAllReport().toPromise();for(let s of o){let i=yield e.guestService.getGuestById(s.idGuest).toPromise();e.reports.push({name:i?.fullName,mess:s.mess,id:i?.guestID})}})()}delete(e){this.reportService.deleteReportByGuestId(e).subscribe(o=>{o.succeeded&&(this.snkbr.openSnackBar("Delete success","success"),this.ngOnInit())})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(O),t.Y36(F.Q),t.Y36(q.o))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-testimonial"]],decls:12,vars:1,consts:[[1,"container","mt-5"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"delete"],[1,"fa-solid","fa-trash-can",3,"click"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),t._uU(5,"Name"),t.qZA(),t.TgZ(6,"th",2),t._uU(7,"Message"),t.qZA(),t.TgZ(8,"th",2),t._uU(9,"Handle"),t.qZA()()(),t.TgZ(10,"tbody"),t.YNc(11,_,7,2,"tr",3),t.qZA()()()),2&o&&(t.xp6(11),t.Q6J("ngForOf",s.reports))},dependencies:[p.sg],styles:[".delete[_ngcontent-%COMP%]{width:100px}i[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();const R=[{path:"",children:[{path:"",component:(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:7,vars:0,consts:[["mat-stretch-tabs","false","mat-align-tabs","start"],["label","Chart"],["label","Report"],["label","Testimonial"]],template:function(o,s){1&o&&(t.TgZ(0,"mat-tab-group",0)(1,"mat-tab",1),t._UZ(2,"app-chart"),t.qZA(),t.TgZ(3,"mat-tab",2),t._UZ(4,"app-report"),t.qZA(),t.TgZ(5,"mat-tab",3),t._UZ(6,"app-testimonial"),t.qZA()())},dependencies:[d.uX,d.SP,y,U,w]})}return n})()}]}];let S=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[v.Bz.forChild(R),v.Bz]})}return n})(),x=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[p.ez,S,d.Nh,T.T5,c.UX,c.u5]})}return n})()}}]);