"use strict";(self.webpackChunkHotelManagement_Admin=self.webpackChunkHotelManagement_Admin||[]).push([[620],{4620:(k,m,r)=>{r.r(m),r.d(m,{TableModule:()=>y});var c=r(6814),g=r(4104),U=r(1545),i=r(6223),p=r(4581),u=r(7700),e=r(5879),f=r(1420),h=r(482);function _(o,d){1&o&&(e.TgZ(0,"h1",18),e._uU(1,"Add User"),e.qZA())}function Z(o,d){1&o&&(e.TgZ(0,"h1",18),e._uU(1,"Update User"),e.qZA())}function T(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addUser())}),e._uU(1,"Add"),e.qZA()}}function v(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateUser())}),e._uU(1,"Update"),e.qZA()}}let b=(()=>{class o{constructor(t,s,a,n,l){this.data=t,this.dialogRef=s,this.formBuilder=a,this.snkbr=n,this.userSVC=l}ngOnInit(){this.userForm=this.formBuilder.group({userName:"",fullName:"",email:""}),this.data&&this.data.id&&this.userSVC.getUser(this.data.id).subscribe(t=>{this.userForm=this.formBuilder.group({userName:t.userName,fullName:t.fullName,email:t.email})})}onNoClick(){this.dialogRef.close()}addUser(){var s=this.userForm.value.fullName,a=this.userForm.value.userName;this.userForm.value.email.trim()&&s.trim()&&a.trim()?this.userSVC.addUser(this.userForm.value).subscribe(n=>{console.log(n),0==n.succeeded?this.snkbr.openSnackBar(n.mess,"failed"):(this.snkbr.openSnackBar("User added successfully","success"),this.onNoClick())}):this.snkbr.openSnackBar("Please fill input","failed")}updateUser(){var t=this.userForm.value.email,s=this.userForm.value.fullName,a=this.userForm.value.userName;console.log(this.data.idToUpdate),t.trim()&&s.trim()&&a.trim()?this.userSVC.updateUser(this.userForm.value,this.data.id).subscribe(n=>{0==n.succeeded?this.snkbr.openSnackBar(n.mess,"failed"):(this.snkbr.openSnackBar("Update added successfully","success"),this.onNoClick())}):this.snkbr.openSnackBar("Please fill input","failed")}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(u.WI),e.Y36(u.so),e.Y36(i.qu),e.Y36(f.o),e.Y36(h.K))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-user"]],decls:29,vars:5,consts:[[1,"modal-dialog","container","p-5"],[1,"modal-content"],[1,"modal-header"],["mat-dialog-title","",4,"ngIf"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","my-3"],[3,"formGroup"],[1,"mb-3"],["for","exampleInputName",1,"form-label"],["type","text","formControlName","userName",1,"form-control"],["type","text","formControlName","fullName",1,"form-control"],["for","exampleInputEmail1",1,"form-label"],["type","email","aria-describedby","emailHelp","formControlName","email",1,"form-control"],["for","exampleInputPassword1",1,"form-label"],["disabled","","value","Abc@123",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","mx-4",3,"click"],["type","submit","class","btn btn-primary","id","btn",3,"click",4,"ngIf"],["mat-dialog-title",""],["type","submit","id","btn",1,"btn","btn-primary",3,"click"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,_,2,0,"h1",3),e.YNc(4,Z,2,0,"h1",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return a.onNoClick()}),e.qZA()(),e.TgZ(6,"div",5)(7,"form",6)(8,"div",7)(9,"label",8),e._uU(10,"UserName"),e.qZA(),e._UZ(11,"input",9),e.qZA(),e.TgZ(12,"div",7)(13,"label",8),e._uU(14,"FullName"),e.qZA(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"div",7)(17,"label",11),e._uU(18,"Email address"),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.TgZ(20,"div",7)(21,"label",13),e._uU(22,"Password"),e.qZA(),e._UZ(23,"input",14),e.qZA(),e.TgZ(24,"div",15)(25,"button",16),e.NdJ("click",function(){return a.onNoClick()}),e._uU(26,"Close"),e.qZA(),e.YNc(27,T,2,0,"button",17),e.YNc(28,v,2,0,"button",17),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("ngIf","Add"==a.data.action),e.xp6(1),e.Q6J("ngIf","Update"==a.data.action),e.xp6(3),e.Q6J("formGroup",a.userForm),e.xp6(20),e.Q6J("ngIf","Add"==a.data.action),e.xp6(1),e.Q6J("ngIf","Update"==a.data.action))},dependencies:[c.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u]})}return o})();function C(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"img",17),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",18)(13,"button",19),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openUpdateDialog(n.idToUpdate))}),e._uU(14," Update "),e.qZA(),e.TgZ(15,"button",20),e.NdJ("click",function(){const n=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deleteUser(n.idToUpdate))}),e._uU(16," Delete "),e.qZA()()()}if(2&o){const t=d.$implicit;e.xp6(4),e.Oqu(t.userName),e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(e.xi3(11,4,t.dateJoined,"dd/MM/yyyy"))}}const A=[{path:"",children:[{path:"",component:(()=>{class o{constructor(t,s,a){this.userService=t,this.dialog=s,this.snkbr=a,this.users=[],this.searchValue=""}ngOnInit(){this.userService.getAllUser().subscribe(t=>{this.users=t.filter(s=>s.roles.includes("Staff"))})}openAddDialog(){this.dialog.open(b,{width:"50vw",data:{action:"Add"}}).afterClosed().subscribe(s=>{this.ngOnInit()})}openUpdateDialog(t){this.dialog.open(b,{width:"50vw",data:{action:"Update",id:t}}).afterClosed().subscribe(a=>{this.ngOnInit()})}deleteUser(t){this.userService.deleteUser(t).subscribe(s=>{this.ngOnInit(),this.snkbr.openSnackBar("User Delete Succesfully","success")})}onSearchChange(){this.searchValue.trim?this.userService.getAllUser().subscribe(t=>{this.users=t.filter(s=>s.roles.includes("Staff")),this.users=this.users.filter(s=>s.userName.includes(this.searchValue))}):this.userService.getAllUser().subscribe(t=>{this.users=t.filter(s=>s.roles.includes("Staff"))}),console.log(this.users)}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(h.K),e.Y36(u.uw),e.Y36(f.o))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-table"]],decls:34,vars:2,consts:[[1,"container-fluid"],[1,"text-dark","mb-4"],[1,"card","shadow"],[1,"card-header","py-3","d-flex","d-flex","justify-content-between"],[1,"text-primary","m-0","fw-bold"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"row"],[1,"col-md-6","text-nowrap"],[1,"col-md-6"],["id","dataTable_filter",1,"text-md-end","dataTables_filter","col-12"],[1,"form-label","col-12"],["type","search","placeholder","Search",1,"form-control","form-control-sm","col-12",3,"ngModel","ngModelChange"],["id","dataTable","role","grid","aria-describedby","dataTable_info",1,"table-responsive","table","mt-2"],["id","dataTable",1,"table","my-0"],[1,"text-center"],[4,"ngFor","ngForOf"],["width","30","height","30","src","assets/img/avatars/avatar5.jpeg",1,"rounded-circle","me-2"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-primary","col-4",3,"click"],["type","button",1,"btn","btn-danger","col-4","mx-2",3,"click"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"User Manage"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"p",4),e._uU(6,"Employee Info"),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return a.openAddDialog()}),e._uU(8," Add "),e.qZA()(),e.TgZ(9,"div",6)(10,"div",7),e._UZ(11,"div",8),e.TgZ(12,"div",9)(13,"div",10)(14,"label",11)(15,"input",12),e.NdJ("ngModelChange",function(l){return a.searchValue=l})("ngModelChange",function(){return a.onSearchChange()}),e.qZA()()()()(),e.TgZ(16,"div",13)(17,"table",14)(18,"thead")(19,"tr"),e._UZ(20,"th"),e.TgZ(21,"th"),e._uU(22,"UserName"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"FullName"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Email"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Start date"),e.qZA(),e.TgZ(29,"th",15),e._uU(30,"Action"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,C,17,7,"tr",16),e.qZA(),e._UZ(33,"tfoot"),e.qZA()()()()()),2&s&&(e.xp6(15),e.Q6J("ngModel",a.searchValue),e.xp6(17),e.Q6J("ngForOf",a.users))},dependencies:[c.sg,i.Fj,i.JJ,i.On,c.uU]})}return o})()}]}];let N=(()=>{class o{static#e=this.\u0275fac=function(s){return new(s||o)};static#t=this.\u0275mod=e.oAB({type:o});static#s=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(A),p.Bz]})}return o})(),y=(()=>{class o{static#e=this.\u0275fac=function(s){return new(s||o)};static#t=this.\u0275mod=e.oAB({type:o});static#s=this.\u0275inj=e.cJS({imports:[c.ez,N,g.Nh,U.T5,i.UX,i.u5,u.Is]})}return o})()}}]);